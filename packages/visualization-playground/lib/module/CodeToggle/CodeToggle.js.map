{"version":3,"file":"CodeToggle.js","names":["React","useVisConfig","useQueryId","useQueryIdFromDashboard","CopyToClipboard","Space","IconButton","styled","sortObjectByKeys","Code","CodeToggle","config","configOverrides","query","dashboard","codeToggled","setCodeToggled","queryId","dashboardQueryId","visConfig","visConfigSorted","visConfigToDisplay","JSON","stringify","StyledCopyToClipboard"],"sources":["../../../src/CodeToggle/CodeToggle.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport React from 'react'\nimport type { SetStateAction, Dispatch } from 'react'\nimport type { CAll } from '@looker/visualizations-adapters'\nimport {\n  useVisConfig,\n  useQueryId,\n  useQueryIdFromDashboard,\n} from '@looker/components-data'\nimport { CopyToClipboard, Space, IconButton } from '@looker/components'\nimport styled from 'styled-components'\nimport { sortObjectByKeys } from '../utils'\nimport { Code } from '@styled-icons/material/Code'\n\ntype CodeToggleProps = {\n  config: Partial<CAll>\n  codeToggled?: boolean\n  setCodeToggled: Dispatch<SetStateAction<boolean>>\n} & (\n  | {\n      dashboard?: never\n      query?: string | number\n    }\n  | {\n      dashboard?: number\n      query?: never\n    }\n)\n\nexport const CodeToggle = ({\n  config: configOverrides,\n  query,\n  dashboard,\n  codeToggled,\n  setCodeToggled,\n}: CodeToggleProps) => {\n  const { queryId: dashboardQueryId } = useQueryIdFromDashboard(dashboard)\n  const { queryId } = useQueryId(query || dashboardQueryId)\n  const { visConfig } = useVisConfig(queryId, configOverrides)\n  const visConfigSorted = sortObjectByKeys(visConfig)\n  const visConfigToDisplay = JSON.stringify(visConfigSorted, null, 2)\n\n  return (\n    <Space reverse>\n      <IconButton\n        icon={<Code />}\n        label=\"Show code\"\n        size=\"large\"\n        toggle={codeToggled}\n        toggleBackground\n        onClick={() => setCodeToggled(!codeToggled)}\n      />\n      {codeToggled ? (\n        <StyledCopyToClipboard\n          content={visConfigToDisplay}\n          success=\"Copied to clipboard!\"\n        />\n      ) : (\n        ''\n      )}\n    </Space>\n  )\n}\n\nconst StyledCopyToClipboard = styled(CopyToClipboard)`\n  display: inline;\n`\n"],"mappings":";;AAIA,OAAOA,KAAK,MAAM,OAAO;AAGzB,SACEC,YAAY,EACZC,UAAU,EACVC,uBAAuB,QAClB,yBAAyB;AAChC,SAASC,eAAe,EAAEC,KAAK,EAAEC,UAAU,QAAQ,oBAAoB;AACvE,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,gBAAgB,QAAQ,UAAU;AAC3C,SAASC,IAAI,QAAQ,6BAA6B;AAiBlD,OAAO,MAAMC,UAAU,GAAG,CAAC;EACzBC,MAAM,EAAEC,eAAe;EACvBC,KAAK;EACLC,SAAS;EACTC,WAAW;EACXC;AACe,CAAC,KAAK;EACrB,MAAM;IAAEC,OAAO,EAAEC;EAAiB,CAAC,GAAGf,uBAAuB,CAACW,SAAS,CAAC;EACxE,MAAM;IAAEG;EAAQ,CAAC,GAAGf,UAAU,CAACW,KAAK,IAAIK,gBAAgB,CAAC;EACzD,MAAM;IAAEC;EAAU,CAAC,GAAGlB,YAAY,CAACgB,OAAO,EAAEL,eAAe,CAAC;EAC5D,MAAMQ,eAAe,GAAGZ,gBAAgB,CAACW,SAAS,CAAC;EACnD,MAAME,kBAAkB,GAAGC,IAAI,CAACC,SAAS,CAACH,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;EAEnE,OACE,oBAAC,KAAK;IAAC,OAAO;EAAA,GACZ,oBAAC,UAAU;IACT,IAAI,EAAE,oBAAC,IAAI,OAAI;IACf,KAAK,EAAC,WAAW;IACjB,IAAI,EAAC,OAAO;IACZ,MAAM,EAAEL,WAAY;IACpB,gBAAgB;IAChB,OAAO,EAAE,MAAMC,cAAc,CAAC,CAACD,WAAW;EAAE,EAC5C,EACDA,WAAW,GACV,oBAAC,qBAAqB;IACpB,OAAO,EAAEM,kBAAmB;IAC5B,OAAO,EAAC;EAAsB,EAC9B,GAEF,EACD,CACK;AAEZ,CAAC;AAED,MAAMG,qBAAqB,GAAGjB,MAAM,CAACH,eAAe,CAAC;EAAA;EAAA;AAAA,gBAAC;AACtD;AACA,GAAC"}