{"version":3,"file":"useLocalStorage.js","names":["useLocalStorage","key","value","useContext","AppContext","localStorageSetItem","localStorageGetItem","useState","stateValue","setStateValue","useEffect","getValue","localStorageValue","JSON","parse","console","error","setValue","useCallback","newValue","stringify"],"sources":["../../../src/utils/useLocalStorage.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport { useEffect, useContext, useState, useCallback } from 'react'\nimport { AppContext } from '../AppContext'\n\n/*\n * Get and Set localstorage value to the provided key.\n * If value argument is provided, set the value. If value argument is undefined,\n * read from localstorage.\n */\nexport const useLocalStorage = <T>(\n  key: string,\n  value?: T\n): [T | undefined, (newValue?: T) => void] => {\n  const { localStorageSetItem, localStorageGetItem } = useContext(AppContext)\n\n  const [stateValue, setStateValue] = useState<T | undefined>(value)\n\n  useEffect(() => {\n    const getValue = async () => {\n      try {\n        if (localStorageGetItem) {\n          const localStorageValue = await localStorageGetItem(key)\n          if (localStorageValue) {\n            setStateValue(JSON.parse(localStorageValue))\n          }\n        }\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error(error)\n      }\n    }\n\n    getValue()\n  }, [key, localStorageGetItem])\n\n  const setValue = useCallback(\n    (newValue?: T) => {\n      if (localStorageSetItem) {\n        localStorageSetItem(key, JSON.stringify(newValue))\n      }\n      setStateValue(newValue)\n    },\n    [key, localStorageSetItem]\n  )\n\n  return [stateValue, setValue]\n}\n"],"mappings":";;;;;;;;;AAIA;AACA;;AAOO,IAAMA,eAAe,GAAG,SAAlBA,eAAe,CAC1BC,GAAW,EACXC,KAAS,EACmC;EAC5C,kBAAqD,IAAAC,iBAAU,EAACC,sBAAU,CAAC;IAAnEC,mBAAmB,eAAnBA,mBAAmB;IAAEC,mBAAmB,eAAnBA,mBAAmB;EAEhD,gBAAoC,IAAAC,eAAQ,EAAgBL,KAAK,CAAC;IAAA;IAA3DM,UAAU;IAAEC,aAAa;EAEhC,IAAAC,gBAAS,EAAC,YAAM;IACd,IAAMC,QAAQ;MAAA,sEAAG;QAAA;QAAA;UAAA;YAAA;cAAA;cAAA,KAETL,mBAAmB;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACWA,mBAAmB,CAACL,GAAG,CAAC;YAAA;cAAlDW,iBAAiB;cACvB,IAAIA,iBAAiB,EAAE;gBACrBH,aAAa,CAACI,IAAI,CAACC,KAAK,CAACF,iBAAiB,CAAC,CAAC;cAC9C;YAAC;cAAA;cAAA;YAAA;cAAA;cAAA;cAIHG,OAAO,CAACC,KAAK,aAAO;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA,CAEvB;MAAA,gBAZKL,QAAQ;QAAA;MAAA;IAAA,GAYb;IAEDA,QAAQ,EAAE;EACZ,CAAC,EAAE,CAACV,GAAG,EAAEK,mBAAmB,CAAC,CAAC;EAE9B,IAAMW,QAAQ,GAAG,IAAAC,kBAAW,EAC1B,UAACC,QAAY,EAAK;IAChB,IAAId,mBAAmB,EAAE;MACvBA,mBAAmB,CAACJ,GAAG,EAAEY,IAAI,CAACO,SAAS,CAACD,QAAQ,CAAC,CAAC;IACpD;IACAV,aAAa,CAACU,QAAQ,CAAC;EACzB,CAAC,EACD,CAAClB,GAAG,EAAEI,mBAAmB,CAAC,CAC3B;EAED,OAAO,CAACG,UAAU,EAAES,QAAQ,CAAC;AAC/B,CAAC;AAAA"}