{"version":3,"file":"index-integration.spec.js","names":["test","sagas","takeEvery","slice","actions","getText","call","Promise","resolve","put","setText","createSlice","name","initialState","text","reducers","state","hooks","createSliceHooks","store","createStore","Component","useActions","useStoreState","r","render","fireEvent","findByText","click","expect","getByText","toBeInTheDocument"],"sources":["../../../src/createSliceHooks/index-integration.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { createSlice } from '@reduxjs/toolkit'\nimport { fireEvent, render } from '@testing-library/react'\nimport React from 'react'\nimport { Provider } from 'react-redux'\nimport { call, put, takeEvery } from 'redux-saga/effects'\nimport { createStore } from '../createStore'\nimport { createSliceHooks } from '.'\n\ntest('reducers and sagas', async () => {\n  interface State {\n    text: string\n  }\n\n  const slice = createSlice({\n    name: 'test',\n    initialState: {\n      text: 'click',\n    } as State,\n    reducers: {\n      getText(state) {\n        state.text = 'loading'\n      },\n      setText(state) {\n        state.text = 'done'\n      },\n    },\n  })\n\n  function* sagas() {\n    yield takeEvery(slice.actions.getText, function* () {\n      yield call(() => Promise.resolve())\n      yield put(slice.actions.setText())\n    })\n  }\n\n  const hooks = createSliceHooks(slice, sagas)\n  const store = createStore()\n\n  const Component = () => {\n    const actions = hooks.useActions()\n    const state = hooks.useStoreState()\n    return <button onClick={actions.getText}>{state.text}</button>\n  }\n\n  const r = render(\n    <Provider store={store}>\n      <Component />\n    </Provider>\n  )\n\n  fireEvent.click(await r.findByText('click'))\n  expect(r.getByText('loading')).toBeInTheDocument()\n  expect(await r.findByText('done')).toBeInTheDocument()\n})\n"],"mappings":";;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,IAAI,CAAC,oBAAoB,6DAAE;EAAA,oBAoBfC,KAAK;EAAA;IAAA;MAAA;QAALA,KAAK;UAAA;YAAA;cAAA;gBAAA;gBACb,OAAM,IAAAC,kBAAS,EAACC,KAAK,CAACC,OAAO,CAACC,OAAO,0BAAE;kBAAA;oBAAA;sBAAA;wBAAA;wBACrC,OAAM,IAAAC,aAAI,EAAC;0BAAA,OAAMC,OAAO,CAACC,OAAO,EAAE;wBAAA,EAAC;sBAAA;wBAAA;wBACnC,OAAM,IAAAC,YAAG,EAACN,KAAK,CAACC,OAAO,CAACM,OAAO,EAAE,CAAC;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA,CACnC,EAAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;QAAA,kCAJMT,KAAK;QAfTE,KAAK,GAAG,IAAAQ,oBAAW,EAAC;UACxBC,IAAI,EAAE,MAAM;UACZC,YAAY,EAAE;YACZC,IAAI,EAAE;UACR,CAAU;UACVC,QAAQ,EAAE;YACRV,OAAO,mBAACW,KAAK,EAAE;cACbA,KAAK,CAACF,IAAI,GAAG,SAAS;YACxB,CAAC;YACDJ,OAAO,mBAACM,KAAK,EAAE;cACbA,KAAK,CAACF,IAAI,GAAG,MAAM;YACrB;UACF;QACF,CAAC,CAAC;QASIG,KAAK,GAAG,IAAAC,kBAAgB,EAACf,KAAK,EAAEF,KAAK,CAAC;QACtCkB,KAAK,GAAG,IAAAC,wBAAW,GAAE;QAErBC,SAAS,GAAG,SAAZA,SAAS,GAAS;UACtB,IAAMjB,OAAO,GAAGa,KAAK,CAACK,UAAU,EAAE;UAClC,IAAMN,KAAK,GAAGC,KAAK,CAACM,aAAa,EAAE;UACnC,OAAO;YAAQ,OAAO,EAAEnB,OAAO,CAACC;UAAQ,GAAEW,KAAK,CAACF,IAAI,CAAU;QAChE,CAAC;QAEKU,CAAC,GAAG,IAAAC,aAAM,EACd,iCAAC,oBAAQ;UAAC,KAAK,EAAEN;QAAM,GACrB,iCAAC,SAAS,OAAG,CACJ,CACZ;QAAA,eAEDO,gBAAS;QAAA;QAAA,OAAaF,CAAC,CAACG,UAAU,CAAC,OAAO,CAAC;MAAA;QAAA;QAAA,aAAjCC,KAAK;QACfC,MAAM,CAACL,CAAC,CAACM,SAAS,CAAC,SAAS,CAAC,CAAC,CAACC,iBAAiB,EAAE;QAAA,eAClDF,MAAM;QAAA;QAAA,OAAOL,CAAC,CAACG,UAAU,CAAC,MAAM,CAAC;MAAA;QAAA;QAAA,gCAAEI,iBAAiB;MAAA;MAAA;QAAA;IAAA;EAAA;AAAA,CACrD,GAAC"}