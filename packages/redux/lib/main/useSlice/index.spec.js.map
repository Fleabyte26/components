{"version":3,"file":"index.spec.js","names":["jest","mock","actualReact","requireActual","useEffect","fn","useStore","addReducer","mockAddReducer","mockUseEffect","mockUseStore","slice","createSlice","initialState","name","reducers","test","beforeEach","clearAllMocks","renderHook","useSlice","expect","toHaveBeenCalledTimes","toHaveBeenCalledWith","reducer","mockImplementation"],"sources":["../../../src/useSlice/index.spec.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { createSlice } from '@reduxjs/toolkit'\nimport { renderHook } from '@testing-library/react-hooks'\nimport { useEffect } from 'react'\nimport { useStore } from 'react-redux'\nimport { useSlice } from '.'\n\njest.mock('react', () => {\n  const actualReact = jest.requireActual('react')\n  return {\n    ...actualReact,\n    useEffect: jest.fn(actualReact.useEffect),\n  }\n})\n\njest.mock('react-redux', () => ({\n  ...jest.requireActual('react-redux'),\n  useStore: jest.fn(() => ({\n    addReducer: mockAddReducer,\n  })),\n}))\n\nconst mockAddReducer = jest.fn()\nconst mockUseEffect = useEffect as jest.Mock\nconst mockUseStore = useStore as jest.Mock\n\nconst slice = createSlice({\n  initialState: {},\n  name: 'test',\n  reducers: {\n    test() {},\n  },\n})\n\nbeforeEach(() => {\n  jest.clearAllMocks()\n})\n\ntest('calls useStore', () => {\n  renderHook(() => useSlice(slice))\n  expect(mockUseStore).toHaveBeenCalledTimes(1)\n  expect(mockUseStore).toHaveBeenCalledWith()\n})\n\ntest('calls addReducer', () => {\n  renderHook(() => useSlice(slice))\n  expect(mockAddReducer).toHaveBeenCalledTimes(1)\n  expect(mockAddReducer).toHaveBeenCalledWith(slice.name, slice.reducer)\n})\n\ntest('calls addReducer in useEffect', async () => {\n  mockUseEffect.mockImplementation(() => {})\n  renderHook(() => useSlice(slice))\n  expect(mockUseEffect).toHaveBeenCalledTimes(1)\n  expect(mockAddReducer).toHaveBeenCalledTimes(0)\n})\n"],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AAA4B;AAAA;AAE5BA,IAAI,CAACC,IAAI,CAAC,OAAO,EAAE,YAAM;EACvB,IAAMC,WAAW,GAAGF,IAAI,CAACG,aAAa,CAAC,OAAO,CAAC;EAC/C,uCACKD,WAAW;IACdE,SAAS,EAAEJ,IAAI,CAACK,EAAE,CAACH,WAAW,CAACE,SAAS;EAAC;AAE7C,CAAC,CAAC;AAEFJ,IAAI,CAACC,IAAI,CAAC,aAAa,EAAE;EAAA,uCACpBD,IAAI,CAACG,aAAa,CAAC,aAAa,CAAC;IACpCG,QAAQ,EAAEN,IAAI,CAACK,EAAE,CAAC;MAAA,OAAO;QACvBE,UAAU,EAAEC;MACd,CAAC;IAAA,CAAC;EAAC;AAAA,CACH,CAAC;AAEH,IAAMA,cAAc,GAAGR,IAAI,CAACK,EAAE,EAAE;AAChC,IAAMI,aAAa,GAAGL,gBAAsB;AAC5C,IAAMM,YAAY,GAAGJ,oBAAqB;AAE1C,IAAMK,KAAK,GAAG,IAAAC,oBAAW,EAAC;EACxBC,YAAY,EAAE,CAAC,CAAC;EAChBC,IAAI,EAAE,MAAM;EACZC,QAAQ,EAAE;IACRC,IAAI,kBAAG,CAAC;EACV;AACF,CAAC,CAAC;AAEFC,UAAU,CAAC,YAAM;EACfjB,IAAI,CAACkB,aAAa,EAAE;AACtB,CAAC,CAAC;AAEFF,IAAI,CAAC,gBAAgB,EAAE,YAAM;EAC3B,IAAAG,sBAAU,EAAC;IAAA,OAAM,IAAAC,UAAQ,EAACT,KAAK,CAAC;EAAA,EAAC;EACjCU,MAAM,CAACX,YAAY,CAAC,CAACY,qBAAqB,CAAC,CAAC,CAAC;EAC7CD,MAAM,CAACX,YAAY,CAAC,CAACa,oBAAoB,EAAE;AAC7C,CAAC,CAAC;AAEFP,IAAI,CAAC,kBAAkB,EAAE,YAAM;EAC7B,IAAAG,sBAAU,EAAC;IAAA,OAAM,IAAAC,UAAQ,EAACT,KAAK,CAAC;EAAA,EAAC;EACjCU,MAAM,CAACb,cAAc,CAAC,CAACc,qBAAqB,CAAC,CAAC,CAAC;EAC/CD,MAAM,CAACb,cAAc,CAAC,CAACe,oBAAoB,CAACZ,KAAK,CAACG,IAAI,EAAEH,KAAK,CAACa,OAAO,CAAC;AACxE,CAAC,CAAC;AAEFR,IAAI,CAAC,+BAA+B,6DAAE;EAAA;IAAA;MAAA;QACpCP,aAAa,CAACgB,kBAAkB,CAAC,YAAM,CAAC,CAAC,CAAC;QAC1C,IAAAN,sBAAU,EAAC;UAAA,OAAM,IAAAC,UAAQ,EAACT,KAAK,CAAC;QAAA,EAAC;QACjCU,MAAM,CAACZ,aAAa,CAAC,CAACa,qBAAqB,CAAC,CAAC,CAAC;QAC9CD,MAAM,CAACb,cAAc,CAAC,CAACc,qBAAqB,CAAC,CAAC,CAAC;MAAA;MAAA;QAAA;IAAA;EAAA;AAAA,CAChD,GAAC"}