{"version":3,"file":"index.spec.js","names":["jest","mock","configureStore","fn","deepCombineReducers","mockConfigureStore","replaceReducer","dispatch","mockReduxSaga","run","beforeEach","mockReset","mockReturnValue","reduxSaga","test","store","createStore","expect","addReducer","toBe","addSaga","preloadedState","toHaveBeenCalledTimes","toHaveBeenCalledWith","objectContaining","devTools","reducers","test1","test2","reducer","saga"],"sources":["../../../src/createStore/index.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { configureStore } from '@reduxjs/toolkit'\nimport reduxSaga from 'redux-saga'\nimport { createStore } from '.'\nimport { deepCombineReducers } from '../deepCombineReducers'\n\njest.mock('@reduxjs/toolkit', () => ({\n  configureStore: jest.fn(),\n}))\n\njest.mock('../deepCombineReducers', () => ({\n  deepCombineReducers: jest.fn(),\n}))\n\njest.mock('redux-saga', () => jest.fn())\n\nconst mockConfigureStore = {\n  replaceReducer: jest.fn(),\n  dispatch: jest.fn(),\n}\n\nconst mockReduxSaga = {\n  run: jest.fn(),\n}\n\nbeforeEach(() => {\n  // @ts-ignore\n  deepCombineReducers.mockReset().mockReturnValue('deepCombineReducers')\n\n  // @ts-ignore\n  configureStore.mockReset().mockReturnValue(mockConfigureStore)\n\n  // @ts-ignore\n  reduxSaga.mockReset().mockReturnValue(mockReduxSaga)\n})\n\ntest('extended APIs exist', () => {\n  const store = createStore()\n  expect(typeof store.addReducer).toBe('function')\n  expect(typeof store.addSaga).toBe('function')\n})\n\ntest('configureStore', () => {\n  const preloadedState = {}\n  createStore({ preloadedState })\n  expect(configureStore).toHaveBeenCalledTimes(1)\n  expect(configureStore).toHaveBeenCalledWith(\n    // @ts-ignore not on type yet\n    expect.objectContaining({\n      devTools: true,\n      preloadedState,\n    })\n  )\n})\n\ntest('addReducer', () => {\n  const reducers = {\n    test1: () => {},\n    test2: () => {},\n  }\n  const store = createStore({ reducer: { test1: reducers.test1 } })\n  store.addReducer('test2' as any, reducers.test2)\n  expect(deepCombineReducers).toHaveBeenCalledTimes(1)\n  expect(deepCombineReducers).toHaveBeenCalledWith(reducers)\n  expect(mockConfigureStore.replaceReducer).toHaveBeenCalledTimes(1)\n  expect(mockConfigureStore.replaceReducer).toHaveBeenCalledWith(\n    'deepCombineReducers'\n  )\n})\n\ntest('addSaga', () => {\n  const store = createStore()\n  function* saga() {}\n  store.addSaga(saga)\n  expect(mockReduxSaga.run).toHaveBeenCalledTimes(1)\n  expect(mockReduxSaga.run).toHaveBeenCalledWith(saga)\n})\n"],"mappings":"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"}