{"version":3,"file":"index.spec.js","names":["configureStore","reduxSaga","createStore","deepCombineReducers","jest","mock","fn","mockConfigureStore","replaceReducer","dispatch","mockReduxSaga","run","beforeEach","mockReset","mockReturnValue","test","store","expect","addReducer","toBe","addSaga","preloadedState","toHaveBeenCalledTimes","toHaveBeenCalledWith","objectContaining","devTools","reducers","test1","test2","reducer","saga"],"sources":["../../../src/createStore/index.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { configureStore } from '@reduxjs/toolkit'\nimport reduxSaga from 'redux-saga'\nimport { createStore } from '.'\nimport { deepCombineReducers } from '../deepCombineReducers'\n\njest.mock('@reduxjs/toolkit', () => ({\n  configureStore: jest.fn(),\n}))\n\njest.mock('../deepCombineReducers', () => ({\n  deepCombineReducers: jest.fn(),\n}))\n\njest.mock('redux-saga', () => jest.fn())\n\nconst mockConfigureStore = {\n  replaceReducer: jest.fn(),\n  dispatch: jest.fn(),\n}\n\nconst mockReduxSaga = {\n  run: jest.fn(),\n}\n\nbeforeEach(() => {\n  // @ts-ignore\n  deepCombineReducers.mockReset().mockReturnValue('deepCombineReducers')\n\n  // @ts-ignore\n  configureStore.mockReset().mockReturnValue(mockConfigureStore)\n\n  // @ts-ignore\n  reduxSaga.mockReset().mockReturnValue(mockReduxSaga)\n})\n\ntest('extended APIs exist', () => {\n  const store = createStore()\n  expect(typeof store.addReducer).toBe('function')\n  expect(typeof store.addSaga).toBe('function')\n})\n\ntest('configureStore', () => {\n  const preloadedState = {}\n  createStore({ preloadedState })\n  expect(configureStore).toHaveBeenCalledTimes(1)\n  expect(configureStore).toHaveBeenCalledWith(\n    // @ts-ignore not on type yet\n    expect.objectContaining({\n      devTools: true,\n      preloadedState,\n    })\n  )\n})\n\ntest('addReducer', () => {\n  const reducers = {\n    test1: () => {},\n    test2: () => {},\n  }\n  const store = createStore({ reducer: { test1: reducers.test1 } })\n  store.addReducer('test2' as any, reducers.test2)\n  expect(deepCombineReducers).toHaveBeenCalledTimes(1)\n  expect(deepCombineReducers).toHaveBeenCalledWith(reducers)\n  expect(mockConfigureStore.replaceReducer).toHaveBeenCalledTimes(1)\n  expect(mockConfigureStore.replaceReducer).toHaveBeenCalledWith(\n    'deepCombineReducers'\n  )\n})\n\ntest('addSaga', () => {\n  const store = createStore()\n  function* saga() {}\n  store.addSaga(saga)\n  expect(mockReduxSaga.run).toHaveBeenCalledTimes(1)\n  expect(mockReduxSaga.run).toHaveBeenCalledWith(saga)\n})\n"],"mappings":"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"}