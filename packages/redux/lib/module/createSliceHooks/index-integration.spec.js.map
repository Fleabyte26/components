{"version":3,"file":"index-integration.spec.js","names":["createSlice","fireEvent","render","React","Provider","call","put","takeEvery","createStore","createSliceHooks","test","slice","name","initialState","text","reducers","getText","state","setText","sagas","actions","Promise","resolve","hooks","store","Component","useActions","useStoreState","r","click","findByText","expect","getByText","toBeInTheDocument"],"sources":["../../../src/createSliceHooks/index-integration.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { createSlice } from '@reduxjs/toolkit'\nimport { fireEvent, render } from '@testing-library/react'\nimport React from 'react'\nimport { Provider } from 'react-redux'\nimport { call, put, takeEvery } from 'redux-saga/effects'\nimport { createStore } from '../createStore'\nimport { createSliceHooks } from '.'\n\ntest('reducers and sagas', async () => {\n  interface State {\n    text: string\n  }\n\n  const slice = createSlice({\n    name: 'test',\n    initialState: {\n      text: 'click',\n    } as State,\n    reducers: {\n      getText(state) {\n        state.text = 'loading'\n      },\n      setText(state) {\n        state.text = 'done'\n      },\n    },\n  })\n\n  function* sagas() {\n    yield takeEvery(slice.actions.getText, function* () {\n      yield call(() => Promise.resolve())\n      yield put(slice.actions.setText())\n    })\n  }\n\n  const hooks = createSliceHooks(slice, sagas)\n  const store = createStore()\n\n  const Component = () => {\n    const actions = hooks.useActions()\n    const state = hooks.useStoreState()\n    return <button onClick={actions.getText}>{state.text}</button>\n  }\n\n  const r = render(\n    <Provider store={store}>\n      <Component />\n    </Provider>\n  )\n\n  fireEvent.click(await r.findByText('click'))\n  expect(r.getByText('loading')).toBeInTheDocument()\n  expect(await r.findByText('done')).toBeInTheDocument()\n})\n"],"mappings":";;AAKA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,EAAEC,MAAM,QAAQ,wBAAwB;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,IAAI,EAAEC,GAAG,EAAEC,SAAS,QAAQ,oBAAoB;AACzD,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,gBAAgB,QAAQ,GAAG;AAEpCC,IAAI,CAAC,oBAAoB,EAAE,YAAY;EAKrC,MAAMC,KAAK,GAAGX,WAAW,CAAC;IACxBY,IAAI,EAAE,MAAM;IACZC,YAAY,EAAE;MACZC,IAAI,EAAE;IACR,CAAU;IACVC,QAAQ,EAAE;MACRC,OAAO,CAACC,KAAK,EAAE;QACbA,KAAK,CAACH,IAAI,GAAG,SAAS;MACxB,CAAC;MACDI,OAAO,CAACD,KAAK,EAAE;QACbA,KAAK,CAACH,IAAI,GAAG,MAAM;MACrB;IACF;EACF,CAAC,CAAC;EAEF,UAAUK,KAAK,GAAG;IAChB,MAAMZ,SAAS,CAACI,KAAK,CAACS,OAAO,CAACJ,OAAO,EAAE,aAAa;MAClD,MAAMX,IAAI,CAAC,MAAMgB,OAAO,CAACC,OAAO,EAAE,CAAC;MACnC,MAAMhB,GAAG,CAACK,KAAK,CAACS,OAAO,CAACF,OAAO,EAAE,CAAC;IACpC,CAAC,CAAC;EACJ;EAEA,MAAMK,KAAK,GAAGd,gBAAgB,CAACE,KAAK,EAAEQ,KAAK,CAAC;EAC5C,MAAMK,KAAK,GAAGhB,WAAW,EAAE;EAE3B,MAAMiB,SAAS,GAAG,MAAM;IACtB,MAAML,OAAO,GAAGG,KAAK,CAACG,UAAU,EAAE;IAClC,MAAMT,KAAK,GAAGM,KAAK,CAACI,aAAa,EAAE;IACnC,OAAO;MAAQ,OAAO,EAAEP,OAAO,CAACJ;IAAQ,GAAEC,KAAK,CAACH,IAAI,CAAU;EAChE,CAAC;EAED,MAAMc,CAAC,GAAG1B,MAAM,CACd,oBAAC,QAAQ;IAAC,KAAK,EAAEsB;EAAM,GACrB,oBAAC,SAAS,OAAG,CACJ,CACZ;EAEDvB,SAAS,CAAC4B,KAAK,CAAC,MAAMD,CAAC,CAACE,UAAU,CAAC,OAAO,CAAC,CAAC;EAC5CC,MAAM,CAACH,CAAC,CAACI,SAAS,CAAC,SAAS,CAAC,CAAC,CAACC,iBAAiB,EAAE;EAClDF,MAAM,CAAC,MAAMH,CAAC,CAACE,UAAU,CAAC,MAAM,CAAC,CAAC,CAACG,iBAAiB,EAAE;AACxD,CAAC,CAAC"}