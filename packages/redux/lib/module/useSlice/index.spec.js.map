{"version":3,"file":"index.spec.js","names":["createSlice","renderHook","useEffect","useStore","useSlice","jest","mock","actualReact","requireActual","fn","addReducer","mockAddReducer","mockUseEffect","mockUseStore","slice","initialState","name","reducers","test","beforeEach","clearAllMocks","expect","toHaveBeenCalledTimes","toHaveBeenCalledWith","reducer","mockImplementation"],"sources":["../../../src/useSlice/index.spec.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { createSlice } from '@reduxjs/toolkit'\nimport { renderHook } from '@testing-library/react-hooks'\nimport { useEffect } from 'react'\nimport { useStore } from 'react-redux'\nimport { useSlice } from '.'\n\njest.mock('react', () => {\n  const actualReact = jest.requireActual('react')\n  return {\n    ...actualReact,\n    useEffect: jest.fn(actualReact.useEffect),\n  }\n})\n\njest.mock('react-redux', () => ({\n  ...jest.requireActual('react-redux'),\n  useStore: jest.fn(() => ({\n    addReducer: mockAddReducer,\n  })),\n}))\n\nconst mockAddReducer = jest.fn()\nconst mockUseEffect = useEffect as jest.Mock\nconst mockUseStore = useStore as jest.Mock\n\nconst slice = createSlice({\n  initialState: {},\n  name: 'test',\n  reducers: {\n    test() {},\n  },\n})\n\nbeforeEach(() => {\n  jest.clearAllMocks()\n})\n\ntest('calls useStore', () => {\n  renderHook(() => useSlice(slice))\n  expect(mockUseStore).toHaveBeenCalledTimes(1)\n  expect(mockUseStore).toHaveBeenCalledWith()\n})\n\ntest('calls addReducer', () => {\n  renderHook(() => useSlice(slice))\n  expect(mockAddReducer).toHaveBeenCalledTimes(1)\n  expect(mockAddReducer).toHaveBeenCalledWith(slice.name, slice.reducer)\n})\n\ntest('calls addReducer in useEffect', async () => {\n  mockUseEffect.mockImplementation(() => {})\n  renderHook(() => useSlice(slice))\n  expect(mockUseEffect).toHaveBeenCalledTimes(1)\n  expect(mockAddReducer).toHaveBeenCalledTimes(0)\n})\n"],"mappings":";;;;AAKA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,UAAU,QAAQ,8BAA8B;AACzD,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,QAAQ,QAAQ,GAAG;AAE5BC,IAAI,CAACC,IAAI,CAAC,OAAO,EAAE,MAAM;EACvB,MAAMC,WAAW,GAAGF,IAAI,CAACG,aAAa,CAAC,OAAO,CAAC;EAC/C,uCACKD,WAAW;IACdL,SAAS,EAAEG,IAAI,CAACI,EAAE,CAACF,WAAW,CAACL,SAAS;EAAC;AAE7C,CAAC,CAAC;AAEFG,IAAI,CAACC,IAAI,CAAC,aAAa,EAAE,sCACpBD,IAAI,CAACG,aAAa,CAAC,aAAa,CAAC;EACpCL,QAAQ,EAAEE,IAAI,CAACI,EAAE,CAAC,OAAO;IACvBC,UAAU,EAAEC;EACd,CAAC,CAAC;AAAC,EACH,CAAC;AAEH,MAAMA,cAAc,GAAGN,IAAI,CAACI,EAAE,EAAE;AAChC,MAAMG,aAAa,GAAGV,SAAsB;AAC5C,MAAMW,YAAY,GAAGV,QAAqB;AAE1C,MAAMW,KAAK,GAAGd,WAAW,CAAC;EACxBe,YAAY,EAAE,CAAC,CAAC;EAChBC,IAAI,EAAE,MAAM;EACZC,QAAQ,EAAE;IACRC,IAAI,GAAG,CAAC;EACV;AACF,CAAC,CAAC;AAEFC,UAAU,CAAC,MAAM;EACfd,IAAI,CAACe,aAAa,EAAE;AACtB,CAAC,CAAC;AAEFF,IAAI,CAAC,gBAAgB,EAAE,MAAM;EAC3BjB,UAAU,CAAC,MAAMG,QAAQ,CAACU,KAAK,CAAC,CAAC;EACjCO,MAAM,CAACR,YAAY,CAAC,CAACS,qBAAqB,CAAC,CAAC,CAAC;EAC7CD,MAAM,CAACR,YAAY,CAAC,CAACU,oBAAoB,EAAE;AAC7C,CAAC,CAAC;AAEFL,IAAI,CAAC,kBAAkB,EAAE,MAAM;EAC7BjB,UAAU,CAAC,MAAMG,QAAQ,CAACU,KAAK,CAAC,CAAC;EACjCO,MAAM,CAACV,cAAc,CAAC,CAACW,qBAAqB,CAAC,CAAC,CAAC;EAC/CD,MAAM,CAACV,cAAc,CAAC,CAACY,oBAAoB,CAACT,KAAK,CAACE,IAAI,EAAEF,KAAK,CAACU,OAAO,CAAC;AACxE,CAAC,CAAC;AAEFN,IAAI,CAAC,+BAA+B,EAAE,YAAY;EAChDN,aAAa,CAACa,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC;EAC1CxB,UAAU,CAAC,MAAMG,QAAQ,CAACU,KAAK,CAAC,CAAC;EACjCO,MAAM,CAACT,aAAa,CAAC,CAACU,qBAAqB,CAAC,CAAC,CAAC;EAC9CD,MAAM,CAACV,cAAc,CAAC,CAACW,qBAAqB,CAAC,CAAC,CAAC;AACjD,CAAC,CAAC"}