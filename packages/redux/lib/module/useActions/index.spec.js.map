{"version":3,"file":"index.spec.js","names":["createSlice","renderHook","useDispatch","bindActionCreators","useActions","jest","mock","fn","boundActionCreators","dispatch","sliceOptions","initialState","name","reducers","test","beforeEach","mockReset","mockReturnValue","slice","expect","toHaveBeenCalledTimes","toHaveBeenCalledWith","slice1","slice2","actions","result","current","toBe"],"sources":["../../../src/useActions/index.spec.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { createSlice } from '@reduxjs/toolkit'\nimport { renderHook } from '@testing-library/react-hooks'\nimport { useDispatch } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { useActions } from '.'\n\njest.mock('react-redux', () => ({\n  useDispatch: jest.fn(),\n}))\n\njest.mock('redux', () => ({\n  bindActionCreators: jest.fn(),\n}))\n\nconst boundActionCreators = {}\nconst dispatch = () => {}\nconst sliceOptions = {\n  initialState: {},\n  name: 'test',\n  reducers: {\n    test() {},\n  },\n}\n\nbeforeEach(() => {\n  // @ts-ignore\n  useDispatch.mockReset().mockReturnValue(dispatch)\n\n  // @ts-ignore\n  bindActionCreators.mockReset().mockReturnValue(boundActionCreators)\n})\n\ntest('calls dispatch', () => {\n  const slice = createSlice(sliceOptions)\n  renderHook(() => useActions(slice))\n  expect(useDispatch).toHaveBeenCalledTimes(1)\n  expect(useDispatch).toHaveBeenCalledWith()\n})\n\ntest('calls bindActionCreators only once for each slice', () => {\n  const slice1 = createSlice(sliceOptions)\n  const slice2 = createSlice(sliceOptions)\n\n  // First call should be called.\n  renderHook(() => useActions(slice1))\n  expect(bindActionCreators).toHaveBeenCalledTimes(1)\n\n  // Second call should not be called.\n  renderHook(() => useActions(slice1))\n  expect(bindActionCreators).toHaveBeenCalledTimes(1)\n\n  // @ts-ignore we don't care about the type of dispatch in our testing.\n  expect(bindActionCreators).toHaveBeenCalledWith(slice1.actions, dispatch)\n\n  // Third call, but with a different slice should be called.\n  renderHook(() => useActions(slice2))\n  expect(bindActionCreators).toHaveBeenCalledTimes(2)\n\n  // @ts-ignore we don't care about the type of dispatch in our testing.\n  expect(bindActionCreators).toHaveBeenCalledWith(slice2.actions, dispatch)\n})\n\ntest('returns result of bindActionCreators', () => {\n  const slice = createSlice(sliceOptions)\n  const actions = renderHook(() => useActions(slice))\n  expect(actions.result.current).toBe(boundActionCreators)\n})\n"],"mappings":";;AAKA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,UAAU,QAAQ,8BAA8B;AACzD,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,kBAAkB,QAAQ,OAAO;AAC1C,SAASC,UAAU,QAAQ,GAAG;AAE9BC,IAAI,CAACC,IAAI,CAAC,aAAa,EAAE,OAAO;EAC9BJ,WAAW,EAAEG,IAAI,CAACE,EAAE;AACtB,CAAC,CAAC,CAAC;AAEHF,IAAI,CAACC,IAAI,CAAC,OAAO,EAAE,OAAO;EACxBH,kBAAkB,EAAEE,IAAI,CAACE,EAAE;AAC7B,CAAC,CAAC,CAAC;AAEH,MAAMC,mBAAmB,GAAG,CAAC,CAAC;AAC9B,MAAMC,QAAQ,GAAG,MAAM,CAAC,CAAC;AACzB,MAAMC,YAAY,GAAG;EACnBC,YAAY,EAAE,CAAC,CAAC;EAChBC,IAAI,EAAE,MAAM;EACZC,QAAQ,EAAE;IACRC,IAAI,GAAG,CAAC;EACV;AACF,CAAC;AAEDC,UAAU,CAAC,MAAM;EAEfb,WAAW,CAACc,SAAS,EAAE,CAACC,eAAe,CAACR,QAAQ,CAAC;;EAGjDN,kBAAkB,CAACa,SAAS,EAAE,CAACC,eAAe,CAACT,mBAAmB,CAAC;AACrE,CAAC,CAAC;AAEFM,IAAI,CAAC,gBAAgB,EAAE,MAAM;EAC3B,MAAMI,KAAK,GAAGlB,WAAW,CAACU,YAAY,CAAC;EACvCT,UAAU,CAAC,MAAMG,UAAU,CAACc,KAAK,CAAC,CAAC;EACnCC,MAAM,CAACjB,WAAW,CAAC,CAACkB,qBAAqB,CAAC,CAAC,CAAC;EAC5CD,MAAM,CAACjB,WAAW,CAAC,CAACmB,oBAAoB,EAAE;AAC5C,CAAC,CAAC;AAEFP,IAAI,CAAC,mDAAmD,EAAE,MAAM;EAC9D,MAAMQ,MAAM,GAAGtB,WAAW,CAACU,YAAY,CAAC;EACxC,MAAMa,MAAM,GAAGvB,WAAW,CAACU,YAAY,CAAC;;EAGxCT,UAAU,CAAC,MAAMG,UAAU,CAACkB,MAAM,CAAC,CAAC;EACpCH,MAAM,CAAChB,kBAAkB,CAAC,CAACiB,qBAAqB,CAAC,CAAC,CAAC;;EAGnDnB,UAAU,CAAC,MAAMG,UAAU,CAACkB,MAAM,CAAC,CAAC;EACpCH,MAAM,CAAChB,kBAAkB,CAAC,CAACiB,qBAAqB,CAAC,CAAC,CAAC;;EAGnDD,MAAM,CAAChB,kBAAkB,CAAC,CAACkB,oBAAoB,CAACC,MAAM,CAACE,OAAO,EAAEf,QAAQ,CAAC;;EAGzER,UAAU,CAAC,MAAMG,UAAU,CAACmB,MAAM,CAAC,CAAC;EACpCJ,MAAM,CAAChB,kBAAkB,CAAC,CAACiB,qBAAqB,CAAC,CAAC,CAAC;;EAGnDD,MAAM,CAAChB,kBAAkB,CAAC,CAACkB,oBAAoB,CAACE,MAAM,CAACC,OAAO,EAAEf,QAAQ,CAAC;AAC3E,CAAC,CAAC;AAEFK,IAAI,CAAC,sCAAsC,EAAE,MAAM;EACjD,MAAMI,KAAK,GAAGlB,WAAW,CAACU,YAAY,CAAC;EACvC,MAAMc,OAAO,GAAGvB,UAAU,CAAC,MAAMG,UAAU,CAACc,KAAK,CAAC,CAAC;EACnDC,MAAM,CAACK,OAAO,CAACC,MAAM,CAACC,OAAO,CAAC,CAACC,IAAI,CAACnB,mBAAmB,CAAC;AAC1D,CAAC,CAAC"}